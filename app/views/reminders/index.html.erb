<%= render "shared/header" %>
  <div class="main">
    <h2 class="wrapper-title">Reminders</h2>
    <p class="wrapper-subtitle"><%= @user.name %>さんのリマインダー一覧</p>
    <ul>
      <% @reminders.each do |reminder|%>
        <% next_schedule = reminder.next_schedule_calculation(reminder.schedule, reminder.frequency_year, reminder.frequency_month, reminder.frequency_week, reminder.frequency_day) %>
        <li class="left-wrapper-list-item">
          <div class="list-item-contents">
            <div class="list-item-left-inner">
              <div class="remind-date">
                <%= reminder.schedule %>
              </div>
              <div class="remind-title">
                <%= link_to reminder.title, reminder_path(reminder) %>
              </div>
            </div>
            <div class="list-item-right-inner">
              <div class="remind-next-schedule">
                  <%= next_schedule %>
              </div>
              <% unless reminder.records.exists?(implementation_record: Date.today, reminder_id: reminder.id) %>
                <%= link_to "完了", reminder_records_path(reminder), data: { turbo_method: :post }, class: "completion btn" %>
                <%= link_to "skip", reminder_records_path(reminder, skip: true), data: { turbo_method: :post }, class: "skip btn" %>
              <% end %>
            </div>
          </div>
        </li>
      <% end %>
    </ul>
    <%= link_to "新しいリマインダーを作成", new_reminder_path, class: "btn" %>
  </div>
<%= render "shared/footer" %>
